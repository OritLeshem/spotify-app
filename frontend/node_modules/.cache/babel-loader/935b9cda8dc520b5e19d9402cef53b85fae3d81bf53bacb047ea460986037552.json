{"ast":null,"code":"import _regeneratorRuntime from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{store}from'./store';import{SET_USER}from\"./user.reducer\";import{userService}from\"../services/user.service\";import{showErrorMsg}from'../services/event-bus.service';export function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){var user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userService.login(credentials);case 3:user=_context.sent;store.dispatch({type:SET_USER,user:user});return _context.abrupt(\"return\",user);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('Cannot login',_context.t0);throw _context.t0;case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return _login.apply(this,arguments);}export function signup(_x2){return _signup.apply(this,arguments);}function _signup(){_signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(credentials){var user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return userService.signup(credentials);case 3:user=_context2.sent;store.dispatch({type:SET_USER,user:user});return _context2.abrupt(\"return\",user);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log('Cannot signup',_context2.t0);throw _context2.t0;case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return _signup.apply(this,arguments);}export function logout(){return _logout.apply(this,arguments);}function _logout(){_logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return userService.logout();case 3:store.dispatch({type:SET_USER,user:null});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log('Cannot logout',_context3.t0);throw _context3.t0;case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,6]]);}));return _logout.apply(this,arguments);}export function loadUser(_x3){return _loadUser.apply(this,arguments);}function _loadUser(){_loadUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(userId){var user;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return userService.getById(userId);case 3:user=_context4.sent;store.dispatch({type:SET_USER,user:user});// store.dispatch({ type: SET_USER, user })\n_context4.next=11;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);showErrorMsg('Cannot load user');console.log('Cannot load user',_context4.t0);case 11:case\"end\":return _context4.stop();}},_callee4,null,[[0,7]]);}));return _loadUser.apply(this,arguments);}","map":{"version":3,"names":["store","SET_USER","userService","showErrorMsg","login","_x","_login","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","user","wrap","_callee$","_context","prev","next","sent","dispatch","type","abrupt","t0","console","log","stop","signup","_x2","_signup","_callee2","_callee2$","_context2","logout","_logout","_callee3","_callee3$","_context3","loadUser","_x3","_loadUser","_callee4","userId","_callee4$","_context4","getById"],"sources":["/Users/orit/Documents/CodingAcademy/spotify/frontend/src/store/user.actions.js"],"sourcesContent":["import { store } from './store'\r\nimport { SET_USER } from \"./user.reducer\"\r\n\r\nimport { userService } from \"../services/user.service\"\r\nimport { showErrorMsg } from '../services/event-bus.service'\r\n\r\nexport async function login(credentials) {\r\n    try {\r\n        const user = await userService.login(credentials)\r\n        store.dispatch({ type: SET_USER, user })\r\n        return user\r\n    } catch (err) {\r\n        console.log('Cannot login', err)\r\n        throw err\r\n    }\r\n}\r\n\r\nexport async function signup(credentials) {\r\n    try {\r\n        const user = await userService.signup(credentials)\r\n        store.dispatch({ type: SET_USER, user })\r\n        return user\r\n    } catch (err) {\r\n        console.log('Cannot signup', err)\r\n        throw err\r\n    }\r\n}\r\n\r\nexport async function logout() {\r\n    try {\r\n        await userService.logout()\r\n        store.dispatch({ type: SET_USER, user: null })\r\n    } catch (err) {\r\n        console.log('Cannot logout', err)\r\n        throw err\r\n    }\r\n}\r\n\r\nexport async function loadUser(userId) {\r\n    try {\r\n        const user = await userService.getById(userId)\r\n        store.dispatch({ type: SET_USER, user })\r\n        // store.dispatch({ type: SET_USER, user })\r\n    } catch (err) {\r\n        showErrorMsg('Cannot load user')\r\n        console.log('Cannot load user', err)\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}