{"ast":null,"code":"import _regeneratorRuntime from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useParams}from\"react-router-dom\";import{youtubeService}from\"../services/youtube.service\";import{ISPLAYING,SET_CURRENT_SONG}from\"../store/player.reducer\";import{SET_SONGS_LIST}from\"../store/playlist.reducer\";import{Music}from\"../cmps/music\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export function PlaylistGenre(){var _useParams=useParams(),genreName=_useParams.genreName;var dispatch=useDispatch();var currentSong=useSelector(function(storeState){return storeState.playerModule.currentSong;});var isPlaying=useSelector(function(storeState){return storeState.playerModule.isPlaying;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMobile=_useState2[0],setIsMobile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];useEffect(function(){function fetchVideoResults(){return _fetchVideoResults.apply(this,arguments);}function _fetchVideoResults(){_fetchVideoResults=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return youtubeService.getVideoResults(genreName);case 2:results=_context.sent;setSearchResults(results);dispatch({type:SET_SONGS_LIST,playSongs:results});case 5:case\"end\":return _context.stop();}},_callee);}));return _fetchVideoResults.apply(this,arguments);}fetchVideoResults();},[genreName]);useEffect(function(){function handleResize(){if(window.innerWidth<700)setIsMobile(true);if(window.innerWidth>700)setIsMobile(false);}handleResize();window.addEventListener('resize',handleResize);return function(){window.removeEventListener('resize',handleResize);};},[]);var handlePlayPauseClick=function handlePlayPauseClick(song){if(song.id===currentSong.id){// If the clicked song is the same as the current song, toggle isPlaying state.\ndispatch({type:ISPLAYING});}else{// If the clicked song is different, pause the current song, set the new song and start playing it.\nif(isPlaying){dispatch({type:ISPLAYING});}dispatch({type:SET_CURRENT_SONG,song:song});dispatch({type:ISPLAYING});}};function handleSong(ev,songId){console.log(\"song, li clicked\",songId);}return/*#__PURE__*/_jsxs(\"section\",{className:\"main-page playlist-details\",children:[\"    \",/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",genreName]}),/*#__PURE__*/_jsx(\"div\",{className:\"headline-table-title\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"headline-table-col\",children:/*#__PURE__*/_jsx(\"span\",{children:\"#\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"headline-table-col\",children:/*#__PURE__*/_jsx(\"span\",{children:\"TITLE\"})})]})}),searchResults&&/*#__PURE__*/_jsx(\"ul\",{className:\"playlist-detail-result-list\",children:searchResults===null||searchResults===void 0?void 0:searchResults.map(function(song,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"song\",onClick:function onClick(){return handleSong(song.id);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"headline-table-col table-num\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"headline-table-col song-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-img-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:song.imgUrl,alt:\"song\"}),/*#__PURE__*/_jsx(Music,{handlePlayPauseClick:handlePlayPauseClick,song:song,songId:song.id||'4m1EFMoRFvY'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cover-container\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"song-info\",children:[!isMobile?/*#__PURE__*/_jsxs(\"small\",{className:(currentSong===null||currentSong===void 0?void 0:currentSong.id)===song.id?'chosen-green':'',title:song.title,children:[song.title.slice(song.title.indexOf('-'||':')+1,song.title.length+1).slice(0,30),song.title.length>30&&\"...\"]}):/*#__PURE__*/_jsxs(\"small\",{title:song.title,children:[song.title.slice(song.title.indexOf('-'||':')+2,song.title.length+1).slice(0,15),song.title.length>15&&\"...\"]}),/*#__PURE__*/_jsx(\"small\",{children:song.title.substring(0,song.title.indexOf(\"-\"||\":\"))})]})]})]},song.id);})})]});}","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","useParams","youtubeService","ISPLAYING","SET_CURRENT_SONG","SET_SONGS_LIST","Music","jsxs","_jsxs","jsx","_jsx","PlaylistGenre","_useParams","genreName","dispatch","currentSong","storeState","playerModule","isPlaying","_useState","_useState2","_slicedToArray","isMobile","setIsMobile","_useState3","_useState4","searchResults","setSearchResults","fetchVideoResults","_fetchVideoResults","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","results","wrap","_callee$","_context","prev","next","getVideoResults","sent","type","playSongs","stop","handleResize","window","innerWidth","addEventListener","removeEventListener","handlePlayPauseClick","song","id","handleSong","ev","songId","console","log","className","children","map","index","onClick","src","imgUrl","alt","title","slice","indexOf","length","substring"],"sources":["/Users/orit/Documents/CodingAcademy/spotify/frontend/src/pages/playlist-genre.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useParams } from \"react-router-dom\"\n\nimport { youtubeService } from \"../services/youtube.service\"\n\nimport { ISPLAYING, SET_CURRENT_SONG } from \"../store/player.reducer\"\nimport { SET_SONGS_LIST } from \"../store/playlist.reducer\"\n\nimport { Music } from \"../cmps/music\"\n\nexport function PlaylistGenre() {\n  const { genreName } = useParams()\n  const dispatch = useDispatch()\n  const currentSong = useSelector(storeState => storeState.playerModule.currentSong)\n  const isPlaying = useSelector(storeState => storeState.playerModule.isPlaying)\n  const [isMobile, setIsMobile] = useState(false)\n\n  let [searchResults, setSearchResults] = useState(null)\n  useEffect(() => {\n    async function fetchVideoResults() {\n      const results = await youtubeService.getVideoResults(genreName)\n      setSearchResults(results)\n      dispatch({ type: SET_SONGS_LIST, playSongs: results })\n\n    }\n    fetchVideoResults()\n  }, [genreName])\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth < 700) setIsMobile(true)\n      if (window.innerWidth > 700) setIsMobile(false)\n    }\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n  const handlePlayPauseClick = (song) => {\n    if (song.id === currentSong.id) {\n      // If the clicked song is the same as the current song, toggle isPlaying state.\n      dispatch({ type: ISPLAYING })\n    } else {\n      // If the clicked song is different, pause the current song, set the new song and start playing it.\n      if (isPlaying) {\n        dispatch({ type: ISPLAYING })\n      }\n      dispatch({ type: SET_CURRENT_SONG, song })\n      dispatch({ type: ISPLAYING })\n    }\n  };\n  function handleSong(ev, songId) {\n    console.log(\"song, li clicked\", songId)\n  }\n\n  return <section className=\"main-page playlist-details\">    <h2> {genreName}</h2>\n    <div className=\"headline-table-title\">\n      <div className=\"header-row\">\n        <div className=\"headline-table-col\">\n          <span>#</span>\n        </div>\n        <div className=\"headline-table-col\">\n          <span>TITLE</span>\n        </div>\n      </div>\n    </div>\n    {searchResults && <ul className='playlist-detail-result-list'>{searchResults?.map((song, index) => <li key={song.id} className='song' onClick={() => handleSong(song.id)}  >\n      <div className=\"headline-table-col table-num\">{index + 1}\n      </div>\n      <div className=\"headline-table-col song-detail\">\n        <div className=\"table-img-container\">\n          <img src={song.imgUrl} alt=\"song\" />\n          <Music handlePlayPauseClick={handlePlayPauseClick} song={song} songId={song.id || '4m1EFMoRFvY'} />\n        </div>\n        <div className=\"cover-container\"></div>\n        <div className='song-info'>\n          {(!isMobile) ? <small className={currentSong?.id === song.id ? 'chosen-green' : ''} title={song.title}>{song.title.slice((song.title.indexOf('-' || ':') + 1), song.title.length + 1).slice(0, 30)}{song.title.length > 30 && \"...\"}</small> : <small title={song.title}>{song.title.slice((song.title.indexOf('-' || ':') + 2), song.title.length + 1).slice(0, 15)}{song.title.length > 15 && \"...\"}</small>}\n          <small>{song.title.substring(0, song.title.indexOf(\"-\" || \":\"))}</small>\n        </div>\n      </div>\n    </li>)}\n    </ul>}\n  </section>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}