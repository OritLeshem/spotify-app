{"ast":null,"code":"import { store } from './store';\nimport { LOADING_DONE, LOADING_START } from \"./system/system.reducer\";\nimport { SET_USER, SET_USERS } from \"./user.reducer\";\nimport { userService } from \"../services/user.service.local\";\nimport { showErrorMsg } from '../services/event-bus.service';\nexport async function loadUsers() {\n  try {\n    store.dispatch({\n      type: LOADING_START\n    });\n    const users = await userService.getUsers();\n    store.dispatch({\n      type: SET_USERS,\n      users\n    });\n  } catch (err) {\n    console.log('UserActions: err in loadUsers', err);\n  } finally {\n    store.dispatch({\n      type: LOADING_DONE\n    });\n  }\n}\nexport async function login(credentials) {\n  try {\n    const user = await userService.login(credentials);\n    store.dispatch({\n      type: SET_USER,\n      user\n    });\n    return user;\n  } catch (err) {\n    console.log('Cannot login', err);\n    throw err;\n  }\n}\nexport async function signup(credentials) {\n  try {\n    const user = await userService.signup(credentials);\n    store.dispatch({\n      type: SET_USER,\n      user\n    });\n    return user;\n  } catch (err) {\n    console.log('Cannot signup', err);\n    throw err;\n  }\n}\nexport async function logout() {\n  try {\n    await userService.logout();\n    store.dispatch({\n      type: SET_USER,\n      user: null\n    });\n  } catch (err) {\n    console.log('Cannot logout', err);\n    throw err;\n  }\n}\nexport async function loadUser(userId) {\n  try {\n    const user = await userService.getById(userId);\n    store.dispatch({\n      type: SET_USER,\n      user\n    });\n    // store.dispatch({ type: SET_USER, user })\n  } catch (err) {\n    showErrorMsg('Cannot load user');\n    console.log('Cannot load user', err);\n  }\n}","map":{"version":3,"names":["store","LOADING_DONE","LOADING_START","SET_USER","SET_USERS","userService","showErrorMsg","loadUsers","dispatch","type","users","getUsers","err","console","log","login","credentials","user","signup","logout","loadUser","userId","getById"],"sources":["/Users/orit/Documents/CodingAcademy/spotify/frontend/src/store/user.actions.js"],"sourcesContent":["import { store } from './store'\r\nimport { LOADING_DONE, LOADING_START } from \"./system/system.reducer\"\r\nimport { SET_USER, SET_USERS } from \"./user.reducer\"\r\n\r\nimport { userService } from \"../services/user.service.local\"\r\nimport { showErrorMsg } from '../services/event-bus.service'\r\n\r\nexport async function loadUsers() {\r\n    try {\r\n        store.dispatch({ type: LOADING_START })\r\n        const users = await userService.getUsers()\r\n        store.dispatch({ type: SET_USERS, users })\r\n    } catch (err) {\r\n        console.log('UserActions: err in loadUsers', err)\r\n    } finally {\r\n        store.dispatch({ type: LOADING_DONE })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport async function login(credentials) {\r\n    try {\r\n        const user = await userService.login(credentials)\r\n        store.dispatch({ type: SET_USER, user })\r\n        return user\r\n    } catch (err) {\r\n        console.log('Cannot login', err)\r\n        throw err\r\n    }\r\n}\r\n\r\nexport async function signup(credentials) {\r\n    try {\r\n        const user = await userService.signup(credentials)\r\n        store.dispatch({ type: SET_USER, user })\r\n        return user\r\n    } catch (err) {\r\n        console.log('Cannot signup', err)\r\n        throw err\r\n    }\r\n}\r\n\r\nexport async function logout() {\r\n    try {\r\n        await userService.logout()\r\n        store.dispatch({ type: SET_USER, user: null })\r\n    } catch (err) {\r\n        console.log('Cannot logout', err)\r\n        throw err\r\n    }\r\n}\r\n\r\n\r\nexport async function loadUser(userId) {\r\n    try {\r\n        const user = await userService.getById(userId)\r\n        store.dispatch({ type: SET_USER, user })\r\n        // store.dispatch({ type: SET_USER, user })\r\n    } catch (err) {\r\n        showErrorMsg('Cannot load user')\r\n        console.log('Cannot load user', err)\r\n    }\r\n}"],"mappings":"AAAA,SAASA,KAAK,QAAQ,SAAS;AAC/B,SAASC,YAAY,EAAEC,aAAa,QAAQ,yBAAyB;AACrE,SAASC,QAAQ,EAAEC,SAAS,QAAQ,gBAAgB;AAEpD,SAASC,WAAW,QAAQ,gCAAgC;AAC5D,SAASC,YAAY,QAAQ,+BAA+B;AAE5D,OAAO,eAAeC,SAASA,CAAA,EAAG;EAC9B,IAAI;IACAP,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEP;IAAc,CAAC,CAAC;IACvC,MAAMQ,KAAK,GAAG,MAAML,WAAW,CAACM,QAAQ,EAAE;IAC1CX,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEL,SAAS;MAAEM;IAAM,CAAC,CAAC;EAC9C,CAAC,CAAC,OAAOE,GAAG,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEF,GAAG,CAAC;EACrD,CAAC,SAAS;IACNZ,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAER;IAAa,CAAC,CAAC;EAC1C;AACJ;AAIA,OAAO,eAAec,KAAKA,CAACC,WAAW,EAAE;EACrC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMZ,WAAW,CAACU,KAAK,CAACC,WAAW,CAAC;IACjDhB,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEN,QAAQ;MAAEc;IAAK,CAAC,CAAC;IACxC,OAAOA,IAAI;EACf,CAAC,CAAC,OAAOL,GAAG,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEF,GAAG,CAAC;IAChC,MAAMA,GAAG;EACb;AACJ;AAEA,OAAO,eAAeM,MAAMA,CAACF,WAAW,EAAE;EACtC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMZ,WAAW,CAACa,MAAM,CAACF,WAAW,CAAC;IAClDhB,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEN,QAAQ;MAAEc;IAAK,CAAC,CAAC;IACxC,OAAOA,IAAI;EACf,CAAC,CAAC,OAAOL,GAAG,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG,CAAC;IACjC,MAAMA,GAAG;EACb;AACJ;AAEA,OAAO,eAAeO,MAAMA,CAAA,EAAG;EAC3B,IAAI;IACA,MAAMd,WAAW,CAACc,MAAM,EAAE;IAC1BnB,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEN,QAAQ;MAAEc,IAAI,EAAE;IAAK,CAAC,CAAC;EAClD,CAAC,CAAC,OAAOL,GAAG,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG,CAAC;IACjC,MAAMA,GAAG;EACb;AACJ;AAGA,OAAO,eAAeQ,QAAQA,CAACC,MAAM,EAAE;EACnC,IAAI;IACA,MAAMJ,IAAI,GAAG,MAAMZ,WAAW,CAACiB,OAAO,CAACD,MAAM,CAAC;IAC9CrB,KAAK,CAACQ,QAAQ,CAAC;MAAEC,IAAI,EAAEN,QAAQ;MAAEc;IAAK,CAAC,CAAC;IACxC;EACJ,CAAC,CAAC,OAAOL,GAAG,EAAE;IACVN,YAAY,CAAC,kBAAkB,CAAC;IAChCO,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,GAAG,CAAC;EACxC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}