{"ast":null,"code":"import { playlistService } from \"../services/playlist.service.local\";\nexport const SET_PLAYLISTS = 'SET_PLAYLISTS';\nexport const REMOVE_PLAYLIST = 'REMOVE_PLAYLIST';\nexport const ADD_PLAYLIST = 'ADD_PLAYLIST';\nexport const UPDATE_PLAYLIST = 'UPDATE_PLAYLIST';\nexport const UNDO_REMOVE_PLAYLIST = 'UNDO_REMOVE_PLAYLIST';\nexport const SET_FILTER = 'SET_FILTER';\n//song\nexport const REMOVE_SONG_FROM_PLAYLIST = 'REMOVE_SONG_FROM_PLAYLIST';\nexport const SET_PLAYLIST = 'SET_PLAYLIST';\nexport const ADD_SONG_TO_PLAYLIST = 'ADD_SONG_TO_PLAYLIST';\nconst initialState = {\n  playlists: [],\n  playlist: null,\n  filterBy: playlistService.getDefaultFilter(),\n  lastRemovedPlaylist: null\n};\nexport function playlistReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  var newState = state;\n  var playlists;\n  switch (action.type) {\n    case SET_PLAYLISTS:\n      newState = {\n        ...state,\n        playlists: action.playlists\n      };\n      break;\n    case REMOVE_PLAYLIST:\n      const lastRemovedPlaylist = state.playlists.find(playlist => playlist._id === action.playlistId);\n      playlists = state.playlists.filter(playlist => playlist._id !== action.playlistId);\n      newState = {\n        ...state,\n        playlists,\n        lastRemovedPlaylist\n      };\n      break;\n    case ADD_PLAYLIST:\n      newState = {\n        ...state,\n        playlists: [...state.playlists, action.playlist]\n      };\n      break;\n    case UPDATE_PLAYLIST:\n      playlists = state.playlists.map(playlist => playlist._id === action.playlist._id ? action.playlist : playlist);\n      newState = {\n        ...state,\n        playlists\n      };\n      break;\n    case UNDO_REMOVE_PLAYLIST:\n      if (state.lastRemovedPlaylist) {\n        newState = {\n          ...state,\n          playlists: [...state.playlists, state.lastRemovedPlaylist],\n          lastRemovedPlaylist: null\n        };\n      }\n      break;\n    case SET_FILTER:\n      return {\n        ...state,\n        filterBy: action.filterBy\n      };\n    //song in playlist\n    case SET_PLAYLIST:\n      newState = {\n        ...state,\n        playlist: action.playlist\n      };\n      break;\n    case REMOVE_SONG_FROM_PLAYLIST:\n      newState = {\n        ...state,\n        playlist: action.playlist\n      };\n      break;\n    case ADD_SONG_TO_PLAYLIST:\n      newState = {\n        ...state,\n        playlist: action.playlist\n      };\n      break;\n    default:\n  }\n  return newState;\n}","map":{"version":3,"names":["playlistService","SET_PLAYLISTS","REMOVE_PLAYLIST","ADD_PLAYLIST","UPDATE_PLAYLIST","UNDO_REMOVE_PLAYLIST","SET_FILTER","REMOVE_SONG_FROM_PLAYLIST","SET_PLAYLIST","ADD_SONG_TO_PLAYLIST","initialState","playlists","playlist","filterBy","getDefaultFilter","lastRemovedPlaylist","playlistReducer","state","arguments","length","undefined","action","newState","type","find","_id","playlistId","filter","map"],"sources":["/Users/orit/Documents/CodingAcademy/spotify/frontend/src/store/playlist.reducer.js"],"sourcesContent":["import { playlistService } from \"../services/playlist.service.local\"\r\n\r\nexport const SET_PLAYLISTS = 'SET_PLAYLISTS'\r\nexport const REMOVE_PLAYLIST = 'REMOVE_PLAYLIST'\r\nexport const ADD_PLAYLIST = 'ADD_PLAYLIST'\r\nexport const UPDATE_PLAYLIST = 'UPDATE_PLAYLIST'\r\nexport const UNDO_REMOVE_PLAYLIST = 'UNDO_REMOVE_PLAYLIST'\r\nexport const SET_FILTER = 'SET_FILTER'\r\n//song\r\nexport const REMOVE_SONG_FROM_PLAYLIST = 'REMOVE_SONG_FROM_PLAYLIST'\r\nexport const SET_PLAYLIST = 'SET_PLAYLIST'\r\nexport const ADD_SONG_TO_PLAYLIST = 'ADD_SONG_TO_PLAYLIST'\r\n\r\nconst initialState = {\r\n    playlists: [],\r\n    playlist: null,\r\n    filterBy: playlistService.getDefaultFilter(),\r\n    lastRemovedPlaylist: null\r\n}\r\n\r\nexport function playlistReducer(state = initialState, action) {\r\n    var newState = state\r\n    var playlists\r\n    switch (action.type) {\r\n        case SET_PLAYLISTS:\r\n            newState = { ...state, playlists: action.playlists }\r\n            break\r\n        case REMOVE_PLAYLIST:\r\n            const lastRemovedPlaylist = state.playlists.find(playlist => playlist._id === action.playlistId)\r\n            playlists = state.playlists.filter(playlist => playlist._id !== action.playlistId)\r\n            newState = { ...state, playlists, lastRemovedPlaylist }\r\n            break\r\n\r\n        case ADD_PLAYLIST:\r\n            newState = { ...state, playlists: [...state.playlists, action.playlist] }\r\n            break\r\n        case UPDATE_PLAYLIST:\r\n            playlists = state.playlists.map(playlist => (playlist._id === action.playlist._id) ? action.playlist : playlist)\r\n            newState = { ...state, playlists }\r\n            break\r\n        case UNDO_REMOVE_PLAYLIST:\r\n            if (state.lastRemovedPlaylist) {\r\n                newState = { ...state, playlists: [...state.playlists, state.lastRemovedPlaylist], lastRemovedPlaylist: null }\r\n            }\r\n            break\r\n        case SET_FILTER:\r\n            return { ...state, filterBy: action.filterBy }\r\n        //song in playlist\r\n        case SET_PLAYLIST:\r\n            newState = { ...state, playlist: action.playlist }\r\n            break\r\n        case REMOVE_SONG_FROM_PLAYLIST:\r\n            newState = { ...state, playlist: action.playlist }\r\n            break\r\n        case ADD_SONG_TO_PLAYLIST:\r\n            newState = { ...state, playlist: action.playlist }\r\n            break\r\n        default:\r\n    }\r\n    return newState\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}