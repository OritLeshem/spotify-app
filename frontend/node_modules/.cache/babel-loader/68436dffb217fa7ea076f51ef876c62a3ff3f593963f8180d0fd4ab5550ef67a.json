{"ast":null,"code":"import _regeneratorRuntime from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/orit/Documents/CodingAcademy/spotify/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";// const API_KEY = process.env.REACT_APP_API_KEY\nvar API_KEY=\"AIzaSyAi8TiL5zHDXOkZdPP6Aiyc1bVxynZagNI\";export var youtubeService={getVideoResults:getVideoResults,getTimeOfSong:getTimeOfSong,formatDuration:formatDuration,convertDurationToSeconds:convertDurationToSeconds};function getVideoResults(_x){return _getVideoResults.apply(this,arguments);}function _getVideoResults(){_getVideoResults=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(val){var results,res,videos;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:results=[];_context.prev=1;_context.next=4;return axios.get(\"https://www.googleapis.com/youtube/v3/search?part=snippet&videoEmbeddable=true&maxResults=5&type=video&key=\".concat(API_KEY,\"&q=\").concat(val));case 4:res=_context.sent;videos=res.data.items;videos.map(function(video){if(video.snippet.title.includes('Trailer')||!video.snippet.title)return;var song={id:video.id.videoId,title:video.snippet.title,imgUrl:video.snippet.thumbnails.high.url,artist:video.snippet.channelTitle};results.push(song);});console.log(results);return _context.abrupt(\"return\",results);case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0);return _context.abrupt(\"return\",_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return _getVideoResults.apply(this,arguments);}function getTimeOfSong(_x2){return _getTimeOfSong.apply(this,arguments);}function _getTimeOfSong(){_getTimeOfSong=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(val){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log('vallllll',val);if(val){_context2.next=4;break;}console.error(\"Error: Invalid or missing video ID\");throw new Error(\"Invalid or missing video ID\");case 4:console.log(\"val\",val);// const res = await axios.get(`https://www.googleapis.com/youtube/v3/videos?id=qwoyUpxjQ9c&part=contentDetails&key=AIzaSyDbYtw99FWbtr4RCHxS0dxtj3--vXfSp4E`)\n_context2.next=7;return axios.get(\"https://www.googleapis.com/youtube/v3/videos?id=\".concat(val,\"&part=contentDetails&key==\").concat(API_KEY));case 7:res=_context2.sent;console.log(\"API response\",res);console.log(\"API response data\",res.data);if(!(res.data.items&&res.data.items[0])){_context2.next=15;break;}console.log(\"getTimeOfSong\",res.data.items[0].contentDetails.duration);return _context2.abrupt(\"return\",res.data.items[0].contentDetails.duration);case 15:console.error(\"Error: Unable to fetch contentDetails for the given video ID\");throw new Error(\"Unable to fetch contentDetails for the given video ID\");case 17:case\"end\":return _context2.stop();}},_callee2);}));return _getTimeOfSong.apply(this,arguments);}function formatDuration(res){var isDuration=res.data.items[0].contentDetails.duration;var regex=/^PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?$/;var matches=isDuration.match(regex);var hours=parseInt(matches[1])||0;var minutes=parseInt(matches[2])||0;var seconds=parseInt(matches[3])||0;var totalMinutes=hours*60+minutes;var formattedMinutes=totalMinutes.toString().padStart(2,'0');var formattedSeconds=seconds.toString().padStart(2,'0');return\"\".concat(formattedMinutes,\":\").concat(formattedSeconds);}function convertDurationToSeconds(res){var duration=res.data.items[0].contentDetails.duration;var match=duration.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);var hours=parseInt(match[1])||0;var minutes=parseInt(match[2])||0;var seconds=parseInt(match[3])||0;return hours*3600+minutes*60+seconds;}","map":{"version":3,"names":["axios","API_KEY","youtubeService","getVideoResults","getTimeOfSong","formatDuration","convertDurationToSeconds","_x","_getVideoResults","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","val","results","res","videos","wrap","_callee$","_context","prev","next","get","concat","sent","data","items","map","video","snippet","title","includes","song","id","videoId","imgUrl","thumbnails","high","url","artist","channelTitle","push","console","log","abrupt","t0","stop","_x2","_getTimeOfSong","_callee2","_callee2$","_context2","error","Error","contentDetails","duration","isDuration","regex","matches","match","hours","parseInt","minutes","seconds","totalMinutes","formattedMinutes","toString","padStart","formattedSeconds"],"sources":["/Users/orit/Documents/CodingAcademy/spotify/frontend/src/services/youtube.service.js"],"sourcesContent":["import axios from \"axios\"\n// const API_KEY = process.env.REACT_APP_API_KEY\nconst API_KEY = \"AIzaSyAi8TiL5zHDXOkZdPP6Aiyc1bVxynZagNI\"\nexport const youtubeService = {\n  getVideoResults,\n  getTimeOfSong,\n  formatDuration,\n  convertDurationToSeconds\n}\n\nasync function getVideoResults(val) {\n  const results = []\n  try {\n    const res = await axios.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&videoEmbeddable=true&maxResults=5&type=video&key=${API_KEY}&q=${val}`)\n    const videos = res.data.items\n    videos.map(video => {\n      if (video.snippet.title.includes('Trailer') || !video.snippet.title) return\n      const song = {\n        id: video.id.videoId,\n        title: video.snippet.title,\n        imgUrl: video.snippet.thumbnails.high.url,\n        artist: video.snippet.channelTitle\n      }\n      results.push(song)\n    })\n    console.log(results)\n    return results\n  }\n  catch (err) {\n    console.log(err)\n    return err\n  }\n}\n\nasync function getTimeOfSong(val) {\n  console.log('vallllll', val)\n\n  if (!val) {\n    console.error(\"Error: Invalid or missing video ID\");\n    throw new Error(\"Invalid or missing video ID\");\n  }\n  console.log(\"val\", val)\n  // const res = await axios.get(`https://www.googleapis.com/youtube/v3/videos?id=qwoyUpxjQ9c&part=contentDetails&key=AIzaSyDbYtw99FWbtr4RCHxS0dxtj3--vXfSp4E`)\n\n  const res = await axios.get(`https://www.googleapis.com/youtube/v3/videos?id=${val}&part=contentDetails&key==${API_KEY}`)\n  console.log(\"API response\", res);\n  console.log(\"API response data\", res.data);\n\n  if (res.data.items && res.data.items[0]) {\n    console.log(\"getTimeOfSong\", res.data.items[0].contentDetails.duration)\n    return res.data.items[0].contentDetails.duration\n  } else {\n    console.error(\"Error: Unable to fetch contentDetails for the given video ID\");\n    throw new Error(\"Unable to fetch contentDetails for the given video ID\");\n  }\n}\n\nfunction formatDuration(res) {\n  const isDuration = res.data.items[0].contentDetails.duration\n  const regex = /^PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?$/;\n  const matches = isDuration.match(regex);\n\n  const hours = parseInt(matches[1]) || 0;\n  const minutes = parseInt(matches[2]) || 0;\n  const seconds = parseInt(matches[3]) || 0;\n\n  const totalMinutes = (hours * 60) + minutes;\n  const formattedMinutes = totalMinutes.toString().padStart(2, '0');\n  const formattedSeconds = seconds.toString().padStart(2, '0');\n\n  return `${formattedMinutes}:${formattedSeconds}`\n}\nfunction convertDurationToSeconds(res) {\n  const duration = res.data.items[0].contentDetails.duration\n\n  var match = duration.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);\n  var hours = (parseInt(match[1]) || 0);\n  var minutes = (parseInt(match[2]) || 0);\n  var seconds = (parseInt(match[3]) || 0);\n  return hours * 3600 + minutes * 60 + seconds;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}